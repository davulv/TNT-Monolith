<%--

    TNTConcept Easy Enterprise Management by Autentia Real Bussiness Solution S.L.
    Copyright (C) 2007 Autentia Real Bussiness Solution S.L.

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

--%>

 <%@page language="java" contentType="text/html; charset=UTF-8"%>

<%@include file="/inc/tlibs.jsp" %>

<html>
  <head>
    <%@include file="/inc/uiCore.jsp" %>
  </head>	
  <body>
    
    <!-- editContact.jsp: generated by stajanov code generator -->
    <f:loadBundle basename="com.autentia.tnt.resources.messages" var="msg" />
    <i:location place="editContact" msg="${msg}"/> 
    
    <f:view>
        <%@include file="/inc/header.jsp" %>
      <h:form id="contact" enctype="multipart/form-data">
        
        <%-- Header --%>
        <i:titleBar name="${contactBean.name}" msg="${msg}">
          <h:commandLink action="#{contactBean.save}" onclick="if(!askSave('#{contactBean.id}','#{msg['question.confirmSave']}')) return false;">
            <h:graphicImage value="/img/save.gif" styleClass="titleImg" />
          </h:commandLink>
          <h:commandLink action="#{contactBean.delete}" onclick="if( !confirm('#{msg['question.confirmDelete']}') ) return false;" rendered="#{contactBean.deleteAvailable}">
            <h:graphicImage value="/img/delete.gif" styleClass="titleImg" />
          </h:commandLink>
          <h:commandLink action="#{contactBean.list}" immediate="true">
            <h:graphicImage value="/img/back.gif" styleClass="titleImg" />
          </h:commandLink>
        </i:titleBar>
        
        <%-- Edition form --%>
        <table class="editTable" cellpadding="0" cellspacing="0">
          
<%-- contact - generated by stajanov (do not edit/delete) --%>

    
      <%-- Field: name --%>
    <tr>
    	    		<td class="editLabelRW">*${msg['contact.name']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="name" />
                		<h:inputText id="name" value="#{contactBean.name}" size="70" maxlength="150" required="true" styleClass="requiredFieldClass"/>
    	              </h:panelGroup>

              </td>
    </tr>
                                  
  
      <%-- Field: email --%>
    <tr>
    	    		<td class="editLabelRW">${msg['contact.email']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="email" />
                		<h:inputText id="email" value="#{contactBean.email}" size="70" maxlength="128"/>
    	              </h:panelGroup>

              </td>
    </tr>
                                  
    <%-- Field: email2 --%>
    <tr>
    	    		<td class="editLabelRW">${msg['contact.email2']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="email2" />
                		<h:inputText id="email2" value="#{contactBean.email2}" size="70" maxlength="128"/>
    	              </h:panelGroup>

              </td>
    </tr>
  
      <%-- Field: phone --%>
    <tr>
    	    		<td class="editLabelRW">${msg['contact.phone']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="phone" />
                		<h:inputText id="phone" value="#{contactBean.phone}" maxlength="15"/>
    	              </h:panelGroup>

              </td>
    </tr>
                                  
      <%-- Field: phone2 --%>
    <tr>
    	    		<td class="editLabelRW">${msg['contact.phone2']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="phone2" />
                		<h:inputText id="phone2" value="#{contactBean.phone2}" maxlength="15"/>
    	              </h:panelGroup>

              </td>
    </tr>
      
      <%-- Field: mobile --%>
    <tr>
    	    		<td class="editLabelRW">${msg['contact.mobile']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="mobile" />
                		<h:inputText id="mobile" value="#{contactBean.mobile}" maxlength="15"/>
    	              </h:panelGroup>

              </td>
    </tr>
                                  
    
      <%-- Field: fax --%>
    <tr>
    	    		<td class="editLabelRW">${msg['contact.fax']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="fax" />
                		<h:inputText id="fax" value="#{contactBean.fax}" maxlength="15"/>
    	              </h:panelGroup>

              </td>
    </tr>

      <%-- Field: country --%>
    <tr>
    	    		<td class="editLabelRW">${msg['contact.country']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="country" />
                		<h:inputText id="country" value="#{contactBean.country}" maxlength="128"/>
    	              </h:panelGroup>

              </td>
    </tr>
    
      <%-- Field: province --%>
      
    <tr>
    	    		<td class="editLabelRW">${msg['contact.province']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="province" />
            <h:selectOneMenu id="province" value="#{contactBean.province}" >
              <f:selectItems value="#{contactBean.provinces}" />
              <f:converter converterId="autentia.EntityConverter"/>
            </h:selectOneMenu>
          </h:panelGroup>

              </td>
    </tr>    
    
	<%-- Field: city --%>
    <tr>
    	    		<td class="editLabelRW">${msg['contact.city']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="city" />
                		<h:inputText id="city" value="#{contactBean.city}"/>
    	              </h:panelGroup>

              </td>
    </tr>
    
      <%-- Field: postalCode --%>
    <tr>
    	    		<td class="editLabelRW">${msg['contact.postalCode']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="postalCode" />
                		<h:inputText id="postalCode" value="#{contactBean.postalCode}" size="10" maxlength="5"/>
    	              </h:panelGroup>

              </td>
    </tr>

      <%-- Field: address --%>
    <tr>
    	    		<td class="editLabelRW">${msg['contact.address']}:</td>
    	      
      <td class="editFieldCell">

                  <h:panelGroup>
            <h:message styleClass="error" showSummary="true" showDetail="false" for="address" />
                		<h:inputText id="address" value="#{contactBean.address}" size="70" maxlength="128"/>
    	              </h:panelGroup>

              </td>
    </tr>

    
	<%-- Field: position --%>
  
	<tr>
		<td class="editLabelRW">${msg['department.positions']}:</td>
		<td class="editFieldCell" colspan="2">
			<h:panelGroup>
				
				<!-- description about how to use -->
				<h:outputText value="#{msg['contact.howToAddPosition']}"/>
			
				<!-- add new positions -->
				<br/>
				<h:selectOneMenu id="organizationsList" value="#{contactBean.selectedOrganization}"
					valueChangeListener="#{contactBean.changeOrganizationValue}"
					onchange="oamSubmitForm('contact',this.id);">
					<f:selectItems value="#{contactBean.allOrganizations}" />
					<f:converter converterId="autentia.EntityConverter"/>
					<f:attribute name="com.autentia.tnt.converter.EntityConverter.valueClass" 
                        	  value="com.autentia.tnt.businessobject.Organization"/> 
				</h:selectOneMenu>
				<br/>
				<h:selectOneMenu id="departmentsList" value="#{contactBean.selectedDepartment}" 
					rendered="#{contactBean.showDepartmentSelection}"
					valueChangeListener="#{contactBean.changeDepartmentValue}"
					onchange="oamSubmitForm('contact',this.id);">					
					<f:selectItems value="#{contactBean.allDepartmentsOfCompany}" />
					<f:converter converterId="autentia.EntityConverter"/>
					<f:attribute name="com.autentia.tnt.converter.EntityConverter.valueClass" 
                        	  value="com.autentia.tnt.businessobject.Department"/> 
				</h:selectOneMenu>
				<br/>
				<h:selectOneMenu id="positionsList" value="#{contactBean.selectedPosition}"
					rendered="#{contactBean.showPositionSelection}"
					valueChangeListener="#{contactBean.changeValue}"
					onchange="oamSubmitForm('contact',this.id);">					
					<f:selectItems value="#{contactBean.allPositionsOfDepartment}" />
					<f:converter converterId="autentia.EntityConverter"/>
					<f:attribute name="com.autentia.tnt.converter.EntityConverter.valueClass" 
                        	  value="com.autentia.tnt.businessobject.Position"/> 
				</h:selectOneMenu>
				<br/>
				<h:commandLink action="#{contactBean.addPosition}" rendered="#{contactBean.showAddPosition}">
					<h:graphicImage value="/img/add.png" styleClass="titleImg" />
					<h:outputText value="#{msg['contact.addPosition']}"/>
				</h:commandLink>

				<!-- list of positions -->
				<br/>
				  <h:panelGroup rendered="#{contactBean.arePositionsSelected}">
					<t:dataTable id="contactInfos" var="contactInfo"
						value="#{contactBean.contactInfos}"
						preserveDataModel="false" cellpadding="0" cellspacing="0"
						styleClass="listTable" headerClass="listHeaderCell"
						footerClass="listFooter" rows="#{settingBean.mySettings.listSize}"
						rowClasses="listRowO,listRowE"
						columnClasses="listCmdCell,listCommissioningId,listCommissioningRequestDate,listCommissioningName,listCommissioningScope,listCommissioningContent,listCommissioningProducts,listCommissioningDeliveryDate,listCommissioningBudget,listCommissioningNotes,listCommissioningAuthorSignature,listCommissioningReviserSignature,listCommissioningAdminSignature,listCommissioningJustifyInformation,listCommissioningDevelopedActivities,listCommissioningDifficultiesAppeared,listCommissioningResults,listCommissioningConclusions,listCommissioningEvaluation,listCommissioningStatus,listCommissioningInsertDate,listCommissioningUpdateDate,listCommissioningReviser,listCommissioningProject"
						rowOnMouseOver="this.savedClassName=this.className;this.className='listRowSel';"
						rowOnMouseOut="this.className=this.savedClassName;">
						
						<h:column>
							<f:facet name="header">
								<f:verbatim>-</f:verbatim>
							</f:facet>
							<h:commandLink action="#{contactBean.deleteContactInfo}">
								<h:graphicImage value="/img/delete.gif" styleClass="titleImg" />
							</h:commandLink>
						</h:column>
						<h:column>
							<f:facet name="header">
								<f:verbatim>${msg['contact.organization']}</f:verbatim>
							</f:facet>
							<h:outputText value="#{contactInfo.organization.name}"  />
						</h:column>
						<h:column>
							<f:facet name="header">
								<f:verbatim>${msg['contact.department']}</f:verbatim>
							</f:facet>
					 		<h:outputText value="#{contactInfo.department.name}"  />
						</h:column>
						<h:column>
							<f:facet name="header">
								<f:verbatim>${msg['contact.position']}</f:verbatim>
							</f:facet>
					 		<h:outputText value="#{contactInfo.position.name}"  />
						</h:column>
					</t:dataTable>
				</h:panelGroup>
			</h:panelGroup>
		</td>
	</tr>    
 
			<%-- Field: tags --%>
		    <tr>
				<td class="editLabelRW">${msg['contact.tags']}:</td>
				<td class="editFieldCell" colspan="2">
					<h:panelGroup>
						<h:panelGroup rendered="#{contactBean.areTagsToSelect}">
							<h:selectOneMenu id="tagsList" value="#{contactBean.selectedTag}">
								<f:selectItems value="#{contactBean.allTags}" />
								<f:converter converterId="autentia.EntityConverter"/>
								<f:attribute name="com.autentia.tnt.converter.EntityConverter.valueClass" 
			                        	  value="com.autentia.tnt.businessobject.Tag"/> 
							</h:selectOneMenu>
							<h:commandLink action="#{contactBean.addTag}">
								<h:graphicImage value="/img/add.png" styleClass="titleImg" />
							</h:commandLink>
						</h:panelGroup>
						<h:panelGroup rendered="#{!contactBean.areTagsToSelect}">
							<h:graphicImage value="/img/updated.gif" styleClass="titleImg" />
							<h:outputText value="#{msg['position.warn.noTags']}"  />
						</h:panelGroup>	
						
						<h:panelGroup rendered="#{contactBean.areTagsSelected}">
							<h:message styleClass="error" showSummary="true" showDetail="false"
								for="tags" />
							
							<t:dataTable id="tags" var="tagData"
								value="#{contactBean.departmentTags}"
								preserveDataModel="false" cellpadding="0" cellspacing="0"
								styleClass="listTable" headerClass="listHeaderCell"
								footerClass="listFooter" rows="#{settingBean.mySettings.listSize}"
								rowClasses="listRowO,listRowE"
								columnClasses="listCmdCell"
								rowOnMouseOver="this.savedClassName=this.className;this.className='listRowSel';"
								rowOnMouseOut="this.className=this.savedClassName;">						
								<h:column>
									<f:facet name="header">
										<f:verbatim>-</f:verbatim>
									</f:facet>
									<h:commandLink action="#{contactBean.deleteTag}">
										<h:graphicImage value="/img/delete.gif" styleClass="titleImg" />
									</h:commandLink>
								</h:column>						
								<h:column>
									<f:facet name="header">
										<f:verbatim>${msg['tag.name']}</f:verbatim>
									</f:facet>
									<h:outputText value="#{tagData.name}"  />
								</h:column>
								<h:column>
									<f:facet name="header">
										<f:verbatim>${msg['tag.description']}</f:verbatim>
									</f:facet>
									<h:outputText value="#{tagData.description}"  />
								</h:column>							
							</t:dataTable>
						</h:panelGroup>
					</h:panelGroup>
				</td>
			</tr>	
       


<%-- contact - generated by stajanov (do not edit/delete) --%>

          <%-- Field: notified --%>
          <tr>
            <td class="editLabelRW">*${msg['contact.notified']}:</td>
            <td class="editFieldCell">

              <h:panelGroup>
                <h:message styleClass="error" showSummary="true" showDetail="false" for="notified" />
                <h:panelGroup rendered="#{! contactBean.notified}">
                  <h:commandLink action="#{contactBean.sendMail}" styleClass="warning" title="#{msg['editContact.notifiedTooltip']}">
                    <h:graphicImage value="/img/envelope.png" styleClass="titleImg"/>
                    <f:verbatim>&nbsp;</f:verbatim><
                    <h:outputText value="#{msg['editContact.notifiedWarning']}"/>
                  </h:commandLink>
                </h:panelGroup>
                <h:selectBooleanCheckbox id="notified" value="#{contactBean.notified}" required="true" styleClass="requiredFieldClass" />
              </h:panelGroup>

            </td>
          </tr>




		<%-- Field: Owners --%>
		    <tr>
				<td class="editLabelRW">${msg['editContact.owners']}:</td>
				<td class="editFieldCell" colspan="2">
					<h:panelGroup>
						<h:panelGroup rendered="#{contactBean.adminUser}">
							<h:selectOneMenu id="ownersList" value="#{contactBean.selectedOwner}" >
								<f:selectItems value="#{contactBean.allUsers}" />
								<f:converter converterId="autentia.EntityConverter"/>
								<f:attribute name="com.autentia.tnt.converter.EntityConverter.valueClass" 
			                        	  value="com.autentia.tnt.businessobject.User"/> 
							</h:selectOneMenu>
							<h:commandLink action="#{contactBean.addOwner}">
								<h:graphicImage value="/img/add.png" styleClass="titleImg" />
							</h:commandLink>
							<h:message styleClass="error" showSummary="true" showDetail="false"
								for="ownersList" />
						</h:panelGroup>
						<h:panelGroup rendered="#{contactBean.areOwnersSelected}">
							
							<t:dataTable id="owners" var="ownerData"
								value="#{contactBean.owners}"
								preserveDataModel="false" cellpadding="0" cellspacing="0"
								styleClass="listTable" headerClass="listHeaderCell"
								footerClass="listFooter" rows="#{settingBean.mySettings.listSize}"
								rowClasses="listRowO,listRowE"
								columnClasses="listCmdCell"
								rowOnMouseOver="this.savedClassName=this.className;this.className='listRowSel';"
								rowOnMouseOut="this.className=this.savedClassName;">						
								<h:column rendered="#{contactBean.adminUser}">
									<f:facet name="header">
										<f:verbatim>-</f:verbatim>
									</f:facet>
									<h:commandLink action="#{contactBean.deleteOwner}">
										<h:graphicImage value="/img/delete.gif" styleClass="titleImg" />
									</h:commandLink>
								</h:column>						
								<h:column>
									<f:facet name="header">
										<f:verbatim>${msg['editContact.owner']}</f:verbatim>
									</f:facet>
									<h:outputText value="#{ownerData.name}"/>
								</h:column>						
							</t:dataTable>
						</h:panelGroup>
					</h:panelGroup>
				</td>
			</tr>

          
        </table>

      </h:form>
    </f:view>
    
  </body>
</html>  		
