<?xml version="1.0" encoding="UTF-8"  ?>
<!--

    TNTConcept Easy Enterprise Management by Autentia Real Bussiness Solution S.L.
    Copyright (C) 2007 Autentia Real Bussiness Solution S.L.

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

-->

<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
		 name="oferta"
		 columnCount="1"
		 printOrder="Vertical"
		 orientation="Portrait"
		 pageWidth="595"
		 pageHeight="842"
		 columnWidth="535"
		 columnSpacing="0"
		 leftMargin="30"
		 rightMargin="30"
		 topMargin="20"
		 bottomMargin="20"
		 whenNoDataType="AllSectionsNoDetail"
		 isTitleNewPage="false"
		 isSummaryNewPage="false">
	<property name="ireport.scriptlethandling" value="0" />
	<property name="ireport.encoding" value="UTF-8" />
	<import value="java.util.*" />
	<import value="net.sf.jasperreports.engine.*" />
	<import value="net.sf.jasperreports.engine.data.*" />
	<import value="com.autentia.tnt.util.ConfigurationUtil" />

	<parameter name="offerId" isForPrompting="true" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[1]]></defaultValueExpression>
	</parameter>
	<parameter name="idOrg" isForPrompting="true" class="java.lang.Integer"/>
	<parameter name="SUBREPORT_OFFERCOST" isForPrompting="true" class="java.lang.String">
		<parameterDescription><![CDATA[Subreport]]></parameterDescription>
		<defaultValueExpression ><![CDATA["subreport_offerCost"]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_OFFERROLE" isForPrompting="true" class="java.lang.String">
		<parameterDescription><![CDATA[Subreport]]></parameterDescription>
		<defaultValueExpression ><![CDATA["subreport_offerRole"]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_OFFERHEADER" isForPrompting="true" class="java.lang.String">
		<parameterDescription><![CDATA[Subreport]]></parameterDescription>
		<defaultValueExpression ><![CDATA["factura_subreport"]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_BILLFOOTERACCOUNT" isForPrompting="true" class="java.lang.String">
		<parameterDescription><![CDATA[Subreport]]></parameterDescription>
		<defaultValueExpression ><![CDATA["account_subreport"]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_BILLFOOTERINFO" isForPrompting="true" class="java.lang.String">
		<parameterDescription><![CDATA[Subreport]]></parameterDescription>
		<defaultValueExpression ><![CDATA["footerInfo_subreport"]]></defaultValueExpression>
	</parameter>
	<parameter name="showSubreportRole" isForPrompting="true" class="java.lang.String"/>
	<parameter name="showSubreportCost" isForPrompting="true" class="java.lang.String"/>
	<parameter name="SUBREPORT_IVAAPLICADO_OFERTA" isForPrompting="false" class="java.lang.String">
		<defaultValueExpression ><![CDATA["iva_aplicado_oferta"]]></defaultValueExpression>
	</parameter>
	<parameter name="showIVA" isForPrompting="false" class="java.lang.Integer">
		<defaultValueExpression ><![CDATA[new Integer(0)]]></defaultValueExpression>
	</parameter>
	<queryString><![CDATA[SELECT number,orgName, cif, street, streetNumber, streetLocator, contactName, phone, mobile, title, ifnull(descripcion,'---') as descripcion, ifnull(observaciones,'---') as observaciones, estado, fechaModif,
showIva,creationDate, validityDate, updateDate
FROM (SELECT org.name as orgName, org.cif as cif, org.street as street, org.number as streetNumber, org.locator as streetLocator, c.name as contactName, c.mobile as mobile, c.phone as phone, o.title as title, o.showIvaIntoReport as showIva, 
	o.description as descripcion, o.observations as observaciones, case o.offerState 
			when 'OPEN' then 'Abierta'
                        when 'ACCEPTED' then 'Aceptada'
                        when 'REJECTED' then 'Rechazada' end as estado, o.updateDate as fechaModif,
	o.creationDate, o.validityDate, o.updateDate,o.number
	FROM Offer o, Organization org, Contact c
	WHERE o.organizationId = org.id and o.contactId = c.id
		and o.id = $P{offerId}) as tabla]]></queryString>

	<field name="number" class="java.lang.String"/>
	<field name="orgName" class="java.lang.String"/>
	<field name="cif" class="java.lang.String"/>
	<field name="street" class="java.lang.String"/>
	<field name="streetNumber" class="java.lang.String"/>
	<field name="streetLocator" class="java.lang.String"/>
	<field name="contactName" class="java.lang.String"/>
	<field name="phone" class="java.lang.String"/>
	<field name="mobile" class="java.lang.String"/>
	<field name="title" class="java.lang.String"/>
	<field name="descripcion" class="java.lang.String"/>
	<field name="observaciones" class="java.lang.String"/>
	<field name="estado" class="java.lang.String"/>
	<field name="fechaModif" class="java.sql.Timestamp"/>
	<field name="showIva" class="java.lang.Boolean"/>
	<field name="creationDate" class="java.sql.Date"/>
	<field name="validityDate" class="java.sql.Date"/>
	<field name="updateDate" class="java.sql.Timestamp"/>

	<variable name="returnCost" class="java.math.BigDecimal" resetType="Report" calculation="Nothing">
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="returnRole" class="java.math.BigDecimal" resetType="Report" calculation="Nothing">
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="returnPrueba" class="java.math.BigDecimal" resetType="Report" calculation="Nothing">
		<variableExpression><![CDATA[new BigDecimal($P{offerId}.doubleValue())]]></variableExpression>
	</variable>
	<variable name="returnCostSinIva" class="java.math.BigDecimal" resetType="Report" calculation="Nothing">
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="returnRoleSinIva" class="java.math.BigDecimal" resetType="Report" calculation="Nothing">
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
		<background>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</background>
		<title>
			<band height="189"  isSplitAllowed="true" >
				<image  onErrorType="Blank" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="1"
						y="2"
						width="164"
						height="55"
						key="image-1"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<graphicElement stretchType="NoStretch"/>
					<imageExpression class="java.io.InputStream"><![CDATA[ConfigurationUtil.getDefault().getLogoAsStream()]]></imageExpression>
				</image>
				<line direction="TopDown">
					<reportElement
						x="0"
						y="72"
						width="535"
						height="3"
						forecolor="#0000CC"
						key="line-9"/>
					<graphicElement stretchType="NoStretch" pen="2Point"/>
				</line>
				<line direction="TopDown">
					<reportElement
						x="0"
						y="77"
						width="535"
						height="0"
						forecolor="#0000CC"
						key="line-10"/>
					<graphicElement stretchType="NoStretch" pen="1Point"/>
				</line>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						mode="Opaque"
						x="392"
						y="64"
						width="108"
						height="23"
						backcolor="#FFFFFF"
						key="staticText-18"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="18" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text1}]]></textFieldExpression>
				</textField>
				<rectangle radius="5" >
					<reportElement
						x="1"
						y="95"
						width="335"
						height="89"
						forecolor="#0000CC"
						key="rectangle-2"/>
					<graphicElement stretchType="NoStretch"/>
				</rectangle>
				<rectangle radius="5" >
					<reportElement
						x="341"
						y="95"
						width="191"
						height="40"
						forecolor="#0000CC"
						key="rectangle-3"/>
					<graphicElement stretchType="NoStretch"/>
				</rectangle>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						mode="Opaque"
						x="29"
						y="89"
						width="47"
						height="14"
						backcolor="#FFFFFF"
						key="staticText-24"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" pdfFontName="Helvetica" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text2}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="6"
						y="102"
						width="46"
						height="39"
						key="staticText-25"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font fontName="Arial" pdfFontName="Helvetica" size="10" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text3}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="58"
						y="102"
						width="270"
						height="39"
						key="textField-5"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="10" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{orgName} + " - " + $F{cif} + " - " + $F{street} + " " + $F{streetNumber} + " " + $F{streetLocator}]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="58"
						y="141"
						width="270"
						height="1"
						key="line-12"/>
					<graphicElement stretchType="NoStretch" pen="Thin"/>
				</line>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="345"
						y="102"
						width="100"
						height="12"
						key="staticText-31"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font fontName="Arial" pdfFontName="Helvetica" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text4}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="dd-MMM-yy" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="446"
						y="102"
						width="81"
						height="12"
						key="textField-11"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left">
						<font fontName="Arial"/>
					</textElement>
				<textFieldExpression   class="java.util.Date"><![CDATA[$F{creationDate}]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="445"
						y="114"
						width="80"
						height="0"
						key="line-17"/>
					<graphicElement stretchType="NoStretch" pen="Thin"/>
				</line>
				<textField isStretchWithOverflow="false" pattern="dd-MMM-yy" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="446"
						y="114"
						width="81"
						height="12"
						key="textField-22"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left">
						<font fontName="Arial"/>
					</textElement>
				<textFieldExpression   class="java.util.Date"><![CDATA[$F{validityDate}]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="445"
						y="126"
						width="80"
						height="0"
						key="line-29"/>
					<graphicElement stretchType="NoStretch" pen="Thin"/>
				</line>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="345"
						y="114"
						width="100"
						height="12"
						key="staticText-65"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font fontName="Arial" pdfFontName="Helvetica" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text5}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="6"
						y="142"
						width="46"
						height="12"
						key="staticText-67"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font fontName="Arial" pdfFontName="Helvetica" size="10" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text6}]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="58"
						y="154"
						width="270"
						height="0"
						key="line-31"/>
					<graphicElement stretchType="NoStretch" pen="Thin"/>
				</line>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="58"
						y="142"
						width="270"
						height="12"
						key="textField-24"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left">
						<font fontName="Arial" size="8"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{contactName} + "  " + $F{mobile} + "  " + $F{phone}]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="58"
						y="166"
						width="270"
						height="0"
						key="line-32"/>
					<graphicElement stretchType="NoStretch" pen="Thin"/>
				</line>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="58"
						y="155"
						width="270"
						height="12"
						key="textField-25"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left">
						<font fontName="Arial" size="8"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{estado}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="6"
						y="154"
						width="46"
						height="12"
						key="staticText-68"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font fontName="Arial" pdfFontName="Helvetica" size="10" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text7}]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="112"
						y="178"
						width="216"
						height="0"
						key="line-33"/>
					<graphicElement stretchType="NoStretch" pen="Thin"/>
				</line>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="112"
						y="167"
						width="185"
						height="12"
						key="textField-26"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left">
						<font fontName="Arial" size="8"/>
					</textElement>
				<textFieldExpression   class="java.util.Date"><![CDATA[$F{updateDate}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="6"
						y="166"
						width="101"
						height="12"
						key="staticText-69"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font fontName="Arial" pdfFontName="Helvetica" size="10" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text8}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="0"
						y="58"
						width="391"
						height="14"
						key="textField-28"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="12" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{title}]]></textFieldExpression>
				</textField>
				<subreport  isUsingCache="true">
					<reportElement
						x="348"
						y="2"
						width="185"
						height="51"
						key="subreport-3"/>
					<subreportParameter  name="idOrg">
						<subreportParameterExpression><![CDATA[$P{idOrg}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="REPORT_RESOURCE_BUNDLE">
						<subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{SUBREPORT_OFFERHEADER}]]></subreportExpression>
				</subreport>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="177"
						y="15"
						width="153"
						height="12"
						key="staticText-73"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="10" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text11}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="178"
						y="27"
						width="152"
						height="22"
						key="textField-31"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="18" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{number}]]></textFieldExpression>
				</textField>
			</band>
		</title>
		<pageHeader>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</pageHeader>
		<columnHeader>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</columnHeader>
		<detail>
			<band height="193"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="3"
						y="2"
						width="73"
						height="12"
						key="staticText-70"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font fontName="Arial" pdfFontName="Helvetica" size="10" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text9}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="75"
						y="2"
						width="460"
						height="12"
						key="textField-27"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left">
						<font fontName="Arial" size="10"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{descripcion}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						mode="Opaque"
						x="0"
						y="22"
						width="535"
						height="14"
						backcolor="#FFFFFF"
						key="staticText-71"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="10" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text12}]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="0"
						y="36"
						width="535"
						height="0"
						key="line-34"
						positionType="Float"/>
					<graphicElement stretchType="NoStretch"/>
				</line>
				<subreport  isUsingCache="true">
					<reportElement
						x="0"
						y="38"
						width="535"
						height="21"
						key="subreport-1"
						positionType="Float">
							<printWhenExpression><![CDATA[($P{showSubreportRole}.equals("YES"))]]></printWhenExpression>
						</reportElement>
					<subreportParameter  name="offerId">
						<subreportParameterExpression><![CDATA[$P{offerId}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="REPORT_RESOURCE_BUNDLE">
						<subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<returnValue subreportVariable="SumaTotal" toVariable="returnRole"/>
					<returnValue subreportVariable="SumaSinIva" toVariable="returnRoleSinIva"/>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{SUBREPORT_OFFERROLE}]]></subreportExpression>
				</subreport>
				<subreport  isUsingCache="true">
					<reportElement
						x="0"
						y="60"
						width="535"
						height="21"
						key="subreport-2"
						positionType="Float">
							<printWhenExpression><![CDATA[($P{showSubreportCost}.equals("YES"))]]></printWhenExpression>
						</reportElement>
					<subreportParameter  name="offerId">
						<subreportParameterExpression><![CDATA[$P{offerId}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="REPORT_RESOURCE_BUNDLE">
						<subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<returnValue subreportVariable="SumaTotal" toVariable="returnCost"/>
					<returnValue subreportVariable="SumaSinIva" toVariable="returnCostSinIva"/>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{SUBREPORT_OFFERCOST}]]></subreportExpression>
				</subreport>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="284"
						y="177"
						width="162"
						height="14"
						key="staticText-72"
						positionType="Float">
							<printWhenExpression><![CDATA[($F{showIva})]]></printWhenExpression>
						</reportElement>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Right">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="9" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text13}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="¤ #,##0.00" isBlankWhenNull="false" evaluationTime="Report" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="450"
						y="177"
						width="82"
						height="14"
						key="textField-29"
						positionType="Float"
						isRemoveLineWhenBlank="true">
							<printWhenExpression><![CDATA[($F{showIva})]]></printWhenExpression>
						</reportElement>
					<box topBorder="1Point" topBorderColor="#000000" leftBorder="1Point" leftBorderColor="#000000" rightBorder="1Point" rightBorderColor="#000000" bottomBorder="1Point" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="9" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.math.BigDecimal"><![CDATA[new BigDecimal((($V{returnCost} != null ? $V{returnCost}.setScale(2,BigDecimal.ROUND_HALF_UP).doubleValue() : 0)) + (($V{returnRole} != null ? $V{returnRole}.setScale(2,BigDecimal.ROUND_HALF_UP).doubleValue() : 0)))]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="0"
						y="83"
						width="535"
						height="0"
						key="line-35"
						positionType="Float"/>
					<graphicElement stretchType="NoStretch"/>
				</line>
				<subreport  isUsingCache="true">
					<reportElement
						mode="Transparent"
						x="1"
						y="91"
						width="534"
						height="69"
						key="subreport-8"
						positionType="FixRelativeToBottom">
							<printWhenExpression><![CDATA[($F{showIva})]]></printWhenExpression>
						</reportElement>
					<subreportParameter  name="id">
						<subreportParameterExpression><![CDATA[$P{offerId}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="REPORT_RESOURCE_BUNDLE">
						<subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{SUBREPORT_IVAAPLICADO_OFERTA}]]></subreportExpression>
				</subreport>
				<textField isStretchWithOverflow="true" pattern="¤ #,##0.00" isBlankWhenNull="false" evaluationTime="Report" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="247"
						y="162"
						width="82"
						height="14"
						key="textField-128"
						positionType="Float"
						isRemoveLineWhenBlank="true"/>
					<box topBorder="1Point" topBorderColor="#000000" leftBorder="1Point" leftBorderColor="#000000" rightBorder="1Point" rightBorderColor="#000000" bottomBorder="1Point" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="9" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.math.BigDecimal"><![CDATA[new BigDecimal((($V{returnCostSinIva} != null ? $V{returnCostSinIva}.setScale(2,BigDecimal.ROUND_HALF_UP).doubleValue() : 0)) + (($V{returnRoleSinIva} != null ? $V{returnRoleSinIva}.setScale(2,BigDecimal.ROUND_HALF_UP).doubleValue() : 0)))]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="81"
						y="162"
						width="162"
						height="14"
						key="staticText-171"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Right">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="9" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{factura.text30}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" pattern="¤ #,##0.00" isBlankWhenNull="false" evaluationTime="Report" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="450"
						y="162"
						width="82"
						height="14"
						key="textField-129"
						positionType="Float"
						isRemoveLineWhenBlank="true"/>
					<box topBorder="1Point" topBorderColor="#000000" leftBorder="1Point" leftBorderColor="#000000" rightBorder="1Point" rightBorderColor="#000000" bottomBorder="1Point" bottomBorderColor="#000000"/>
					<textElement textAlignment="Center">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="9" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.math.BigDecimal"><![CDATA[new BigDecimal(((($V{returnCost} != null ? $V{returnCost}.setScale(2,BigDecimal.ROUND_HALF_UP).doubleValue() : 0)) + (($V{returnRole} != null ? $V{returnRole}.setScale(2,BigDecimal.ROUND_HALF_UP).doubleValue() : 0))) - ((($V{returnCostSinIva} != null ? $V{returnCostSinIva}.setScale(2,BigDecimal.ROUND_HALF_UP).doubleValue() : 0)) + (($V{returnRoleSinIva} != null ? $V{returnRoleSinIva}.setScale(2,BigDecimal.ROUND_HALF_UP).doubleValue() : 0))))]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="335"
						y="162"
						width="111"
						height="14"
						key="staticText-172"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Right">
						<font fontName="Arial" pdfFontName="Helvetica-Bold" size="9" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{factura.text18} + ":"]]></textFieldExpression>
				</textField>
			</band>
		</detail>
		<columnFooter>
			<band height="20"  isSplitAllowed="true" >
			</band>
		</columnFooter>
		<pageFooter>
			<band height="52"  isSplitAllowed="true" >
				<line direction="TopDown">
					<reportElement
						x="0"
						y="31"
						width="535"
						height="0"
						forecolor="#0000CC"
						key="line-21"/>
					<graphicElement stretchType="NoStretch"/>
				</line>
				<line direction="TopDown">
					<reportElement
						x="0"
						y="28"
						width="535"
						height="0"
						forecolor="#0000CC"
						key="line-22"/>
					<graphicElement stretchType="NoStretch" pen="2Point"/>
				</line>
				<subreport  isUsingCache="true">
					<reportElement
						x="0"
						y="2"
						width="535"
						height="23"
						key="subreport-5"/>
					<subreportParameter  name="idOrg">
						<subreportParameterExpression><![CDATA[$P{idOrg}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="REPORT_RESOURCE_BUNDLE">
						<subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{SUBREPORT_BILLFOOTERINFO}]]></subreportExpression>
				</subreport>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="440"
						y="34"
						width="66"
						height="18"
						key="textField"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Right">
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{comun.pagina} + " " + $V{PAGE_NUMBER} + " " + $R{comun.de} + " "]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Report" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="508"
						y="34"
						width="25"
						height="18"
						key="textField"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left">
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["" + $V{PAGE_NUMBER} + ""]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="EEEEE dd MMMMM yyyy" isBlankWhenNull="false" evaluationTime="Report" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="3"
						y="33"
						width="180"
						height="18"
						key="textField"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font/>
					</textElement>
				<textFieldExpression   class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
				</textField>
			</band>
		</pageFooter>
		<summary>
			<band height="75"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="1"
						y="3"
						width="73"
						height="12"
						key="staticText-170"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font fontName="Arial" pdfFontName="Helvetica" size="10" isBold="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{oferta.text10}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="69"
						y="3"
						width="466"
						height="12"
						key="textField-127"
						positionType="Float"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left">
						<font fontName="Arial" size="10"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{observaciones}]]></textFieldExpression>
				</textField>
				<line direction="TopDown">
					<reportElement
						x="0"
						y="49"
						width="535"
						height="0"
						forecolor="#0000CC"
						key="line-5"
						positionType="FixRelativeToBottom"/>
					<graphicElement stretchType="NoStretch"/>
				</line>
				<line direction="TopDown">
					<reportElement
						x="0"
						y="46"
						width="535"
						height="0"
						forecolor="#0000CC"
						key="line-20"
						positionType="FixRelativeToBottom"/>
					<graphicElement stretchType="NoStretch" pen="2Point"/>
				</line>
				<subreport  isUsingCache="true">
					<reportElement
						x="0"
						y="20"
						width="535"
						height="23"
						key="subreport-7"
						positionType="FixRelativeToBottom"/>
					<subreportParameter  name="idOrg">
						<subreportParameterExpression><![CDATA[$P{idOrg}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="REPORT_RESOURCE_BUNDLE">
						<subreportParameterExpression><![CDATA[$P{REPORT_RESOURCE_BUNDLE}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{SUBREPORT_BILLFOOTERINFO}]]></subreportExpression>
				</subreport>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Page" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="440"
						y="52"
						width="66"
						height="18"
						key="textField"
						positionType="FixRelativeToBottom"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Right">
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$R{comun.pagina} + " " + $V{PAGE_NUMBER} + " " + $R{comun.de} + " "]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Report" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="508"
						y="52"
						width="25"
						height="18"
						key="textField"
						positionType="FixRelativeToBottom"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left">
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["" + $V{PAGE_NUMBER} + ""]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="EEEEE dd MMMMM yyyy" isBlankWhenNull="false" evaluationTime="Report" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="3"
						y="52"
						width="180"
						height="20"
						key="textField-30"
						positionType="FixRelativeToBottom"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font/>
					</textElement>
				<textFieldExpression   class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
				</textField>
			</band>
		</summary>
</jasperReport>
